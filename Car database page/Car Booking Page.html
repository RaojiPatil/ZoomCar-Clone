<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="car booking.css">
</head>


<body>
    <div id="navbar">
        <h3 id="logo">
            <a href="#"><img src="https://www.zoomcar.com/build/98e56e8b0b91e8806885a22ac2bf69a7.png" alt=""></a>
        </h3>

        <div id="options">
            <h3><a id="navbar_color" href="#">Become a Host</a></h3>
            <h3><a id="navbar_color" href="#">ZMS</a></h3>
            <h3><a id="navbar_color" href="#">Login/Signup</a></h3>
        </div>
    </div>

    <div id="body">

        <div id="filter">
            <div class="filter_kms">
                <div class="filter_heading">Free kms:</div>
                <div class="filter_item_kms">
                    <button onclick="nintyfun()" class="filter_list">90</button>
                    <button onclick="onetwontyfun()" class="filter_list">120</button>

                </div>
            </div>

            <div class="filter_fule">
                <div class="filter_heading">Fuel Cost:</div>
                <div class="filter_items">
                    <div class="filter_item">
                        Not Included
                    </div>
                </div>
            </div>


            <div class="filter_Seats">
                <div class="filter_heading">Seats :</div>
                <div class="filter_items">
                    <button onclick="five()" id="filter_item1">5</button>
                    <button onclick="six()" id="filter_item1">6</button>
                    <button onclick="seven()" id="filter_item1">7</button>


                </div>

            </div>

            <div class="filter_cartype">
                <div class="filter_cartype_heading">Car Types :</div>
                <div class="filter_cartype_items">
                    <button onclick="hatchbackcar()" id="kms_border">hatchback</button>
                    <button onclick="Sedancar()" id="kms_border">Sedan</button>
                </div>
            </div>

            <div class="filter_Transmission">
                <div class="filter_heading">Transmission :</div>
                <div class="filter_item2">
                    <div class="list">
                        Manual
                    </div>
                </div>
            </div>

            <div class="filter_Delivery">
                <div class="filter_heading">Delivery Type :</div>
                <div class="filter_item3">
                    <button onclick="Homecar()" class="filter_list3">Home Delivery</button>
                    <button onclick="Airportcar()" class="filter_list3">Airport</button>
                </div>
            </div>

        </div>

        <div>
            <div id="top"></div>
            <div id="top"></div>

            <div id="top3">
                <div class="home_delivery">
                    <div class="icon"><img src="https://s3-ap-southeast-1.amazonaws.com/zoomcar/images/original/976c02875a91f8e252ab53c09f8f30b22ae0e905.png?1595735439">
                    </div>
                    <div class="delivery_heading">
                        <div class="card_heading">
                            Get Home Delivery starting at just â‚¹ 49
                        </div>
                        <div class="card_sub_heading">
                            Don't want to go for pick-up? Select Home Delivery on the next step
                        </div>
                    </div>
                </div>
            </div>

            <div id="cont"></div>


        </div>

    </div>


</body>

</html>

<script>
    // getting data
    async function getData() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();
        // console.log(data.Mumbai);
        showData(data.Delhi);
    }

    getData();

    let parent = document.getElementById('cont')

    function showData(cars) {
        parent.innerHTML = null

        cars.forEach(function(car) {

            let div = document.createElement('div')


            let img = document.createElement('img')
            img.src = car.img

            let center = document.createElement('p')

            let location = document.createElement('p1')
            location.innerText = car.location


            let name = document.createElement('h4')
            name.innerText = car.name


            let fuel = document.createElement('p')
            fuel.innerText = car.fuel

            let Seater = document.createElement('p')
            Seater.innerText = car.Seater + " " + "Seater";

            let Rating = document.createElement('h4')
            Rating.innerText = car.Rating

            let left = document.createElement('h3')

            let price = document.createElement('h5')
            price.innerText = car.price

            let btn = document.createElement('button')
            btn.innerHTML = "Book Now";

            btn.onclick = () => {
                addtoBook(car);
            }

            center.append(location, name, fuel, Seater, Rating)
            left.append(price, btn)

            div.append(img, center, left)

            parent.append(div)


        })


    }

    let ninty = [];
    let onetwonty = [];

    async function nintyfun() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.fuel == "Diesel") {
                ninty.push(e);
            }
        });

        showData(ninty);
    }

    async function onetwontyfun() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.fuel == "Petrol") {
                onetwonty.push(e);
            }
        });

        showData(onetwonty);
    }


    let fiveSeater = [];
    let sixSeater = [];
    let sevenSeater = [];

    // five seater filter function
    async function five() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.Seater == 5) {
                fiveSeater.push(e);
            }
        });

        showData(fiveSeater);
    }


    // six Seater Filter Function
    async function six() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.Seater == 6) {
                sixSeater.push(e);
            }
        });

        showData(sixSeater);
    }

    // Seven Seater Filter Function
    async function seven() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.Seater == 7) {
                sevenSeater.push(e);
            }
        });

        showData(sevenSeater);
    }


    let hatchback = [];
    let Sedan = [];

    async function hatchbackcar() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.Seater == 6 || e.Seater == 7) {
                hatchback.push(e);
            }
        });

        showData(hatchback);
    }

    async function Sedancar() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.Seater == 5) {
                Sedan.push(e);
            }
        });

        showData(Sedan);
    }

    let Home = [];
    let Airport = [];

    async function Homecar() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.Seater == 6 || e.Seater == 7) {
                Home.push(e);
            }
        });

        showData(Home);
    }

    async function Airportcar() {
        let data = await fetch("http://localhost:5000/api/products/");

        data = await data.json();

        let cars = data.Delhi;

        cars.forEach((e) => {
            if (e.Seater == 5) {
                Airport.push(e);
            }
        });

        showData(Airport);
    }



    if (localStorage.getItem("carShow") === null) {
        localStorage.setItem("carShow", JSON.stringify([]));
    }

    function addtoBook(c) {
        let products_cart = JSON.parse(localStorage.getItem("carShow"));
        products_cart.push(c);
        localStorage.setItem("carShow", JSON.stringify(products_cart)); // storing products in the local storage


    }
</script>